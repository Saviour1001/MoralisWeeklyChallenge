(this.webpackJsonpstakeoverflow=this.webpackJsonpstakeoverflow||[]).push([[0],{1035:function(e,t){},1038:function(e,t){},1040:function(e,t){},1044:function(e,t){},1068:function(e,t){},1070:function(e,t){},1079:function(e,t){},1081:function(e,t){},1092:function(e,t){},1094:function(e,t){},1209:function(e,t){},1211:function(e,t){},1218:function(e,t){},1219:function(e,t){},1243:function(e,t){},1250:function(e,t){},1300:function(e,t){},1326:function(e,t){},1515:function(e,t,n){},1568:function(e,t,n){},1645:function(e,t,n){},1646:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(76),s=n.n(c),i=n(36),o=n(361),l=n(71),u=n(1),d=n(5),p=a.a.createContext(),b=n(4);function j(e){var t=e.children,n=Object(i.c)(),a=n.web3,c=n.Moralis,s=n.user,o=Object(r.useState)(),l=Object(d.a)(o,2),u=l[0],j=l[1],f=Object(r.useState)(),y=Object(d.a)(f,2),x=y[0],m=y[1],h=Object(r.useState)('[ { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "bytes32", "name": "categoryId", "type": "bytes32" }, { "indexed": false, "internalType": "string", "name": "category", "type": "string" } ], "name": "CategoryCreated", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "bytes32", "name": "contentId", "type": "bytes32" }, { "indexed": false, "internalType": "string", "name": "contentUri", "type": "string" } ], "name": "ContentAdded", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "bytes32", "name": "postId", "type": "bytes32" }, { "indexed": true, "internalType": "address", "name": "postOwner", "type": "address" }, { "indexed": true, "internalType": "bytes32", "name": "parentId", "type": "bytes32" }, { "indexed": false, "internalType": "bytes32", "name": "contentId", "type": "bytes32" }, { "indexed": false, "internalType": "bytes32", "name": "categoryId", "type": "bytes32" } ], "name": "PostCreated", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "bytes32", "name": "postId", "type": "bytes32" }, { "indexed": true, "internalType": "address", "name": "postOwner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "voter", "type": "address" }, { "indexed": false, "internalType": "uint80", "name": "reputationPostOwner", "type": "uint80" }, { "indexed": false, "internalType": "uint80", "name": "reputationVoter", "type": "uint80" }, { "indexed": false, "internalType": "int40", "name": "postVotes", "type": "int40" }, { "indexed": false, "internalType": "bool", "name": "up", "type": "bool" }, { "indexed": false, "internalType": "uint8", "name": "reputationAmount", "type": "uint8" } ], "name": "Voted", "type": "event" }, { "inputs": [ { "internalType": "string", "name": "_category", "type": "string" } ], "name": "addCategory", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "bytes32", "name": "_parentId", "type": "bytes32" }, { "internalType": "string", "name": "_contentUri", "type": "string" }, { "internalType": "bytes32", "name": "_categoryId", "type": "bytes32" } ], "name": "createPost", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "bytes32", "name": "_categoryId", "type": "bytes32" } ], "name": "getCategory", "outputs": [ { "internalType": "string", "name": "", "type": "string" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "bytes32", "name": "_contentId", "type": "bytes32" } ], "name": "getContent", "outputs": [ { "internalType": "string", "name": "", "type": "string" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "bytes32", "name": "_postId", "type": "bytes32" } ], "name": "getPost", "outputs": [ { "internalType": "address", "name": "", "type": "address" }, { "internalType": "bytes32", "name": "", "type": "bytes32" }, { "internalType": "bytes32", "name": "", "type": "bytes32" }, { "internalType": "int72", "name": "", "type": "int72" }, { "internalType": "bytes32", "name": "", "type": "bytes32" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "_address", "type": "address" }, { "internalType": "bytes32", "name": "_categoryID", "type": "bytes32" } ], "name": "getReputation", "outputs": [ { "internalType": "uint80", "name": "", "type": "uint80" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "bytes32", "name": "_postId", "type": "bytes32" }, { "internalType": "uint8", "name": "_reputationTaken", "type": "uint8" } ], "name": "voteDown", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "bytes32", "name": "_postId", "type": "bytes32" }, { "internalType": "uint8", "name": "_reputationAdded", "type": "uint8" } ], "name": "voteUp", "outputs": [], "stateMutability": "nonpayable", "type": "function" } ]'),O=Object(d.a)(h,2),g=O[0],v=O[1],w=Object(r.useState)("0x48DE2c5B691F3BB434596206a87B56CBBccA4c85"),I=Object(d.a)(w,2),k=I[0],C=I[1],S=Object(r.useState)({categoryId:"0x91",category:"default"}),T=Object(d.a)(S,2),A=T[0],N=T[1];return Object(r.useEffect)((function(){c.onChainChanged((function(e){m(e)})),c.onAccountsChanged((function(e){j(e[0])}))}),[]),Object(r.useEffect)((function(){var e;return m(null===(e=a.givenProvider)||void 0===e?void 0:e.chainId)})),Object(r.useEffect)((function(){var e;return j((null===(e=a.givenProvider)||void 0===e?void 0:e.selectedAddress)||(null===s||void 0===s?void 0:s.get("ethAddress")))}),[a,s]),Object(b.jsx)(p.Provider,{value:{walletAddress:u,chainId:x,selectedCategory:A,setSelectedCategory:N,contractABI:g,setContractABI:v,contractAddress:k,setContractAddress:C},children:t})}function f(){var e=a.a.useContext(p);if(void 0===e)throw new Error("useMoralisDapp must be used within a MoralisDappProvider");return e}new Intl.NumberFormat("en-us",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:6}),new Intl.NumberFormat("en-us",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:4}),new Intl.NumberFormat("en-us",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2});var y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return e?"".concat(e.substr(0,t),"...").concat(e.substr(e.length-t,e.length)):""},x=n(728),m=n.n(x);var h=function(e){var t=f().walletAddress;return(e.address||e.currentWallet)&&t?Object(b.jsx)(m.a,Object(u.a)({seed:e.currentWallet?t.toLowerCase():e.address.toLowerCase(),className:"identicon"},e)):null},O=n(1659),g=n(1657),v=n(130),w=(n(1515),{height:"36px",display:"flex",gap:"5px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"9px",alignItems:"center"});var I=function(e){var t=f().walletAddress,n=Object(r.useState)(),a=Object(d.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(!1),o=Object(d.a)(i,2),l=o[0],p=o[1];if(Object(r.useEffect)((function(){s((null===e||void 0===e?void 0:e.address)||t)}),[t,e]),!c)return null;var j=function(){return Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"#1780FF",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{cursor:"pointer"},onClick:function(){navigator.clipboard.writeText(c),p(!0)},children:[Object(b.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(b.jsx)("path",{d:"M15 3v4a1 1 0 0 0 1 1h4"}),Object(b.jsx)("path",{d:"M18 17h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h4l5 5v7a2 2 0 0 1 -2 2z"}),Object(b.jsx)("path",{d:"M16 17v2a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2"}),Object(b.jsx)("title",{id:"copy-address",children:"Copy Address"})]})};return Object(b.jsxs)("div",{style:Object(u.a)(Object(u.a)({},w),e.style),children:["left"===e.avatar&&Object(b.jsx)(h,{address:c,size:7}),Object(b.jsx)("p",{children:e.size?y(c,e.size):c}),"right"===e.avatar&&Object(b.jsx)(h,{address:c,size:7}),e.copyable&&(l?Object(b.jsx)(k,{}):Object(b.jsx)(j,{}))]})},k=function(){return Object(b.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"3",stroke:"#21BF96",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(b.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(b.jsx)("path",{d:"M5 12l5 5l10 -10"}),Object(b.jsx)("title",{id:"copied-address",children:"Copied!"})]})},C=n(1663),S={"0x1":{currencySymbol:"ETH",blockExplorerUrl:"https://etherscan.io/",wrapped:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2"},"0x3":{currencySymbol:"ETH",blockExplorerUrl:"https://ropsten.etherscan.io/"},"0x4":{currencySymbol:"ETH",blockExplorerUrl:"https://kovan.etherscan.io/"},"0x2a":{currencySymbol:"ETH",blockExplorerUrl:"https://rinkeby.etherscan.io/"},"0x5":{currencySymbol:"ETH",blockExplorerUrl:"https://goerli.etherscan.io/"},"0x539":{chainName:"Local Chain",currencyName:"ETH",currencySymbol:"ETH",rpcUrl:"http://127.0.0.1:7545"},"0xa86a":{chainId:43114,chainName:"Avalanche Mainnet",currencyName:"AVAX",currencySymbol:"AVAX",rpcUrl:"https://api.avax.network/ext/bc/C/rpc",blockExplorerUrl:"https://cchain.explorer.avax.network/"},"0x38":{chainId:56,chainName:"Smart Chain",currencyName:"BNB",currencySymbol:"BNB",rpcUrl:"https://bsc-dataseed.binance.org/",blockExplorerUrl:"https://bscscan.com/",wrapped:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c"},"0x61":{chainId:97,chainName:"Smart Chain - Testnet",currencyName:"BNB",currencySymbol:"BNB",rpcUrl:"https://data-seed-prebsc-1-s1.binance.org:8545/",blockExplorerUrl:"https://testnet.bscscan.com/"},"0x89":{chainId:137,chainName:"Polygon Mainnet",currencyName:"MATIC",currencySymbol:"MATIC",rpcUrl:"https://rpc-mainnet.maticvigil.com/",blockExplorerUrl:"https://explorer-mainnet.maticvigil.com/",wrapped:"0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270"},"0x13881":{chainId:80001,chainName:"Mumbai",currencyName:"MATIC",currencySymbol:"MATIC",rpcUrl:"https://rpc-mumbai.matic.today/",blockExplorerUrl:"https://mumbai.polygonscan.com/"}},T=function(e){var t;return null===(t=S[e])||void 0===t?void 0:t.blockExplorerUrl},A={account:{height:"42px",padding:"0 15px",display:"flex",justifyContent:"center",alignItems:"center",width:"fit-content",borderRadius:"12px",backgroundColor:"rgb(244, 244, 244)",cursor:"pointer"},text:{color:"#21BF96"}};var N=function(){var e=Object(i.c)(),t=e.authenticate,n=e.isAuthenticated,a=e.logout,c=f(),s=c.walletAddress,o=c.chainId,l=Object(r.useState)(!1),p=Object(d.a)(l,2),j=p[0],x=p[1];return n?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{style:A.account,onClick:function(){return x(!0)},children:[Object(b.jsx)("p",{style:Object(u.a)({marginRight:"5px"},A.text),children:y(s,6)}),Object(b.jsx)(h,{currentWallet:!0,scale:3})]}),Object(b.jsxs)(O.a,{visible:j,footer:null,onCancel:function(){return x(!1)},bodyStyle:{padding:"15px",fontSize:"17px",fontWeight:"500"},style:{fontSize:"16px",fontWeight:"500"},width:"400px",children:["Account",Object(b.jsxs)(g.a,{style:{marginTop:"10px",borderRadius:"1rem"},bodyStyle:{padding:"15px"},children:[Object(b.jsx)(I,{avatar:"left",size:6,copyable:!0,style:{fontSize:"20px"}}),Object(b.jsx)("div",{style:{marginTop:"10px",padding:"0 10px"},children:Object(b.jsxs)("a",{href:"".concat(T(o),"/address/").concat(s),target:"_blank",rel:"noreferrer",children:[Object(b.jsx)(C.a,{style:{marginRight:"5px"}}),"View on Explorer"]})})]}),Object(b.jsx)(v.a,{size:"large",type:"primary",style:{width:"100%",marginTop:"10px",borderRadius:"0.5rem",fontSize:"16px",fontWeight:"500"},onClick:function(){a(),x(!1)},children:"Disconnect Wallet"})]})]}):Object(b.jsx)("div",{style:A.account,onClick:function(){return t({signingMessage:"Welcome to Stake Overflow!"})},children:Object(b.jsx)("p",{style:A.text,children:"Authenticate"})})},B=n(1656),L=n(1661),E=n(1662),F=function(){return Object(b.jsxs)("svg",{width:"25",height:"25",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(b.jsx)("path",{d:"M0 10C0 4.47715 4.47715 0 10 0H20C25.5228 0 30 4.47715 30 10V20C30 25.5228 25.5228 30 20 30H10C4.47715 30 0 25.5228 0 20V10Z",fill:"#8247E5"}),Object(b.jsx)("path",{d:"M20.4896 11.5015C20.1157 11.2878 19.635 11.2878 19.2077 11.5015L16.2166 13.2641L14.1869 14.3858L11.2493 16.1484C10.8754 16.362 10.3947 16.362 9.96736 16.1484L7.67062 14.7596C7.29674 14.546 7.02967 14.1187 7.02967 13.638V10.9674C7.02967 10.5401 7.24332 10.1128 7.67062 9.8457L9.96736 8.51039C10.3412 8.29674 10.822 8.29674 11.2493 8.51039L13.546 9.89911C13.9199 10.1128 14.1869 10.5401 14.1869 11.0208V12.7834L16.2166 11.6083V9.79228C16.2166 9.36499 16.003 8.93769 15.5757 8.67062L11.3027 6.16024C10.9288 5.94659 10.4481 5.94659 10.0208 6.16024L5.64095 8.72404C5.21365 8.93769 5 9.36499 5 9.79228V14.8131C5 15.2404 5.21365 15.6677 5.64095 15.9347L9.96736 18.4451C10.3412 18.6588 10.822 18.6588 11.2493 18.4451L14.1869 16.7359L16.2166 15.5608L19.1543 13.8516C19.5282 13.638 20.0089 13.638 20.4362 13.8516L22.7329 15.1869C23.1068 15.4006 23.3739 15.8279 23.3739 16.3086V18.9792C23.3739 19.4065 23.1602 19.8338 22.7329 20.1009L20.4896 21.4362C20.1157 21.6499 19.635 21.6499 19.2077 21.4362L16.911 20.1009C16.5371 19.8872 16.27 19.4599 16.27 18.9792V17.27L14.2404 18.4451V20.2077C14.2404 20.635 14.454 21.0623 14.8813 21.3294L19.2077 23.8398C19.5816 24.0534 20.0623 24.0534 20.4896 23.8398L24.816 21.3294C25.1899 21.1157 25.457 20.6884 25.457 20.2077V15.1335C25.457 14.7062 25.2433 14.2789 24.816 14.0119L20.4896 11.5015Z",fill:"white"})]})},M={item:{display:"flex",alignItems:"center",height:"42px",fontWeight:"500",fontFamily:"Roboto, sans-serif",fontSize:"14px",padding:"0 10px"},button:{border:"2px solid rgb(231, 234, 243)",borderRadius:"12px"}},_=[{key:"0x13881",value:"Mumbai",icon:Object(b.jsx)(F,{})}];var z=function(){var e=Object(i.b)(),t=e.switchNetwork,n=e.chainId,a=e.chain,c=Object(r.useState)({}),s=Object(d.a)(c,2),o=s[0],l=s[1],p=Object(r.useState)(!1),j=Object(d.a)(p,2),f=j[0],y=j[1];console.log("chain",a),Object(r.useEffect)((function(){if(!n)return null;var e=_.find((function(e){return e.key===n}));e||y(!0),l(e),console.log("current chainId: ",n)}),[n]);var x=Object(b.jsx)(B.a,{onClick:function(e){console.log("switch to: ",e.key),t(e.key)},children:_.map((function(e){return Object(b.jsx)(B.a.Item,{icon:e.icon,style:M.item,children:Object(b.jsx)("span",{style:{marginLeft:"5px"},children:e.value})},e.key)}))});return Object(b.jsxs)("div",{style:{position:"relative"},children:[Object(b.jsx)(L.a,{overlay:x,trigger:["click"],children:Object(b.jsxs)(v.a,{icon:null===o||void 0===o?void 0:o.icon,style:Object(u.a)(Object(u.a)({},M.button),M.item),children:[Object(b.jsx)("span",{style:{marginLeft:"5px"},children:null===o||void 0===o?void 0:o.value}),Object(b.jsx)(E.a,{})]},null===o||void 0===o?void 0:o.key)}),Object(b.jsxs)(O.a,{visible:f,footer:null,onCancel:function(){return y(!1)},bodyStyle:{padding:"35px",fontSize:"17px",fontWeight:"500",textAlign:"center"},style:{fontSize:"16px",fontWeight:"500"},width:"400px",children:["Current Chain is not supported please switch to Polygon",Object(b.jsx)(v.a,{size:"large",type:"primary",style:{width:"100%",marginTop:"10px",borderRadius:"0.5rem",fontSize:"16px",fontWeight:"500"},onClick:function(){t("0x13881"),y(!1)},children:"Switch to Polygon"})]})]})},P=n(1655),U=(n(1567),n(1568),{card:{boxShadow:"0 0.5rem 1.2rem rgb(189 197 209 / 20%)",backgroundColor:"white",border:"1px solid #e7eaf3",borderRadius:"0.5rem",fontSize:"16px",color:"#1F3947"}}),R=function(e){var t=e.categories,n=f().setSelectedCategory;return Object(b.jsx)("div",{className:"col-lg-3",children:Object(b.jsx)(B.a,{onClick:function(e){return function(e){var r=t.filter((function(t){return t.categoryId===e}));n(r[0])}(e.key)},style:Object(u.a)(Object(u.a)({},U.card),{},{padding:"10px 0"}),mode:"inline",children:Object(b.jsx)(B.a.ItemGroup,{title:"Categories",children:t.map((function(e){return Object(b.jsx)(B.a.Item,{children:e.category},e.categoryId)}))},"categories")})})},W=n(3),D=n(12),J=n(6),V=n.n(J),H=n(736),q=n(211),X=n(1653),G=n(1654),Y=n(1664),Z=n(1665),K=n(1666),Q=n(1667),$=n(733),ee=n.n($),te=function(e){var t=e.postId,n=Object(i.c)().Moralis,a=Object(r.useState)("0"),c=Object(d.a)(a,2),s=c[0],o=c[1],l=f(),u=l.contractABI,p=l.contractAddress,j=JSON.parse(u),y=Object(i.e)("Votes",(function(e){return e.equalTo("postId",t)}),[],{live:!0}).data,x={contractAddress:p,functionName:"getPost",abi:j,params:{_postId:t}};return Object(r.useEffect)((function(){function e(){return(e=Object(D.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.enableWeb3;case 2:return e.next=4,n.executeFunction(x);case 4:t=e.sent,o(t[3]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[y]),Object(b.jsx)(b.Fragment,{children:s})},ne=function(e){var t=f(),n=t.contractABI,a=t.contractAddress,c=t.selectedCategory,s=JSON.parse(n),o=Object(i.d)(),l=Object(i.f)(),u=Object(r.useState)(),p=Object(d.a)(u,2),j=p[0],y=p[1],x=Object(r.useState)(""),m=Object(d.a)(x,2),h=m[0],O=m[1];function g(){return(g=Object(D.a)(V.a.mark((function t(n){var r,i,o;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(n);case 2:return r=t.sent,i=c.categoryId,o={contractAddress:a,functionName:"createPost",abi:s,params:{_parentId:e.parentId,_contentUri:r,_categoryId:i}},t.next=7,l.fetch({params:o,onSuccess:function(){return H.b.success("success")},onError:function(e){return H.b.error(e)}});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var v=function(){var e=Object(D.a)(V.a.mark((function e(){var t,n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===j){e.next=6;break}return e.next=3,w(j);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=void 0;case 7:return t=e.t0,n={content:h,image:t},e.next=11,o.saveFile("post.json",{base64:btoa(JSON.stringify(n))},{saveIPFS:!0});case 11:return r=e.sent,e.abrupt("return",r._ipfs);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(D.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.saveFile("image.jpg",j,{type:"image/jpeg",saveIPFS:!0});case 2:return t=e.sent,e.abrupt("return",t._ipfs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),!h)return H.b.error("Remember to add the content of your comment");!function(e){g.apply(this,arguments)}({content:h}),y(""),O("")},children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("textarea",{type:"text",className:"mb-2 form-control",placeholder:"Comment",rows:"1",value:h,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("input",{type:"file",className:"mb-2 mt-2 form-control",value:null,onChange:function(){var e=Object(D.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y(t.target.files[0]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]}),Object(b.jsx)("button",{type:"submit",className:"btn btn-dark",children:"Submit"})]})})},re=function(e){var t=Object(i.e)("Posts",(function(t){return t.equalTo("parentId",e.parentId)}),[],{live:!0}),n=JSON.parse(JSON.stringify(t.data,["postId","contentId","postOwner"])).reverse();return Object(b.jsx)("div",{children:n.map((function(e){return Object(b.jsx)(oe,{post:e},e.postId)}))})},ae=function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(re,{className:"col-lg-9",style:Object(u.a)(Object(u.a)({},U.card),{},{padding:"10px 13px",display:"flex",alignItems:"center",justifyContent:"space-between"}),parentId:e.parentId})})},ce=n(1660),se=n.p+"static/media/maticToken.534d7899.png";var ie=function(e){var t=Object(i.c)().Moralis,n=Object(r.useState)(),a=Object(d.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(),l=Object(d.a)(o,2),u=l[0],p=l[1],j=Object(r.useState)("0"),y=Object(d.a)(j,2),x=y[0],m=y[1],h=Object(r.useState)(!1),O=Object(d.a)(h,2),g=O[0],v=O[1],w=f(),I=w.walletAddress,k=w.contractABI,C=w.contractAddress,S=JSON.parse(k),T=Object(i.f)(),A=Object(i.e)("Donates",(function(t){return t.equalTo("postId",e.postId)}),[],{live:!0}).data,N={contractAddress:C,functionName:"getPost",abi:S,params:{_postId:e.postId}};function B(){return B=Object(D.a)(V.a.mark((function n(r){var a,s,i;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(I.toLowerCase()!==e.postOwner.toLowerCase()){n.next=2;break}return n.abrupt("return",H.b.error("You cannot donate on your posts"));case 2:return a=c.amount,s={contractAddress:C,functionName:r,abi:S,params:{_postId:e.postId,_reputationAdded:a}},i={type:"native",amount:t.Units.ETH(a),receiver:e.postOwner},v(!0),n.next=8,t.transfer(i);case 8:return n.next=10,T.fetch({params:s,onSuccess:function(){return console.log("success")},onError:function(e){return console.error(e)}});case 10:case"end":return n.stop()}}),n)}))),B.apply(this,arguments)}return Object(r.useEffect)((function(){u?s({amount:u}):s()}),[u]),Object(r.useEffect)((function(){function e(){return(e=Object(D.a)(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.enableWeb3;case 2:return e.next=4,t.executeFunction(N);case 4:n=e.sent,m(n[5]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[A]),Object(b.jsxs)("div",{children:[Object(b.jsx)(ce.a,{type:"number",size:"large",placeholder:"Amount",style:{height:"4%",width:"20%",margin:"0.5rem",borderColor:"#b8daff"},onChange:function(e){p("".concat(e.target.value))}}),Object(b.jsx)("button",{type:"primary",size:"large",style:{height:"4%",width:"15",background:"#b8daff",color:"black",borderRadius:"5px",borderWidth:"2px"},loading:g,onClick:function(){return function(e){return B.apply(this,arguments)}("donate")},disabled:!c,children:Object(b.jsx)("span",{children:Object(b.jsx)("img",{alt:"Matic",src:se,style:{width:"1.5rem",height:"1.5rem",marginLeft:"0.5rem"}})})}),Object(b.jsx)(b.Fragment,{children:x})]})},oe=function(e){var t=e.post,n=Object(r.useState)(!1),a=Object(d.a)(n,2),c=a[0],s=a[1],o=t.contentId,l=t.postId,p=t.postOwner,j=Object(r.useState)({title:"default",content:"default"}),y=Object(d.a)(j,2),x=y[0],m=y[1],h=Object(i.e)("Contents",(function(e){return e.equalTo("contentId",o)})).data,O=Object(r.useState)(),g=Object(d.a)(O,2),w=g[0],I=g[1],k=Object(i.e)("Votes",(function(e){return e.equalTo("postId",l)}),[],{live:!0}).data,C=f(),S=C.walletAddress,T=C.contractABI,A=C.contractAddress,N=JSON.parse(T),B=Object(i.f)();function L(e){return E.apply(this,arguments)}function E(){return(E=Object(D.a)(V.a.mark((function e(n){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.toLowerCase()!==p.toLowerCase()){e.next=2;break}return e.abrupt("return",H.b.error("You cannot vote on your posts"));case 2:if(!w){e.next=4;break}return e.abrupt("return",H.b.error("Already voted"));case 4:return r={contractAddress:A,functionName:n,abi:N,params:Object(W.a)({_postId:t.postId},"voteDown"===n?"_reputationTaken":"_reputationAdded",1)},e.next=7,B.fetch({params:r,onSuccess:function(){return console.log("success")},onError:function(e){return console.error(e)}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){function e(e){return JSON.parse(JSON.stringify(e,["contentUri"]))[0].contentUri}function t(e){return n.apply(this,arguments)}function n(){return(n=Object(D.a)(V.a.mark((function e(t){var n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t,e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=Object(D.a)(V.a.mark((function n(){var r;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(e(h));case 2:r=n.sent,m(r);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}h.length>0&&function(){r.apply(this,arguments)}()}),[h]),Object(r.useEffect)((function(){if(null===k||void 0===k||!k.length)return null;function e(){return(e=Object(D.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return JSON.parse(JSON.stringify(k)).forEach((function(e){var t=e.voter,n=e.up;t===S&&I(n?"liked":"disliked")})),e.abrupt("return");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[k,S]);var F=[Object(b.jsx)(v.a,{style:{marginTop:"10px",marginBottom:"10px"},shape:"round",onClick:function(){s(!c)},children:"Comment"}),Object(b.jsx)(q.a,{title:"Vote Up",children:Object(b.jsxs)("span",{style:{marginTop:"10px",marginBottom:"10px",paddingRight:"5px",paddingLeft:"10px",fontSize:"15px",display:"flex",alignItems:"center",marginRight:"16px"},onClick:function(){return L("voteUp")},children:[Object(r.createElement)("liked"===w?Y.a:Z.a)," Vote Up"]})},"comment-basic-like"),Object(b.jsx)("span",{style:{fontSize:"15px"},children:Object(b.jsx)(te,{postId:l})}),Object(b.jsx)(q.a,{title:"Dislike",children:Object(b.jsxs)("span",{style:{marginTop:"10px",marginBottom:"10px",paddingRight:"5px",paddingLeft:"5px",marginRight:"50px",fontSize:"15px",display:"flex",alignItems:"center",marginLeft:"8px"},onClick:function(){return L("voteDown")},children:[Object(r.createElement)("disliked"===w?K.a:Q.a)," ","Vote Down"]})},"comment-basic-dislike"),Object(b.jsx)(ae,{style:{paddingLeft:"10px",fontSize:"15px",display:"inline-block",alignItems:"center",marginLeft:"8px"},parentId:t.postId})],M=Object(b.jsx)(X.a,{style:Object(u.a)(Object(u.a)({},U.card),{},{padding:"0px 15px",marginBottom:"10px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}),actions:F,content:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(ee.a,{strong:!0,style:{fontSize:"20px",color:"#333"},children:x.title}),Object(b.jsx)("p",{style:{fontSize:"15px",color:"#111"},children:x.content}),void 0!==x.image?Object(b.jsx)("img",{src:x.image,alt:"img",style:{display:"block",marginLeft:"auto",marginRight:"auto",width:"50%"}}):"",Object(b.jsx)(G.a,{style:{margin:"15px 0"}}),Object(b.jsx)(b.Fragment,{children:c?Object(b.jsx)(ne,{parentId:t.postId}):""}),Object(b.jsx)(ie,{postOwner:t.postOwner,postId:t.postId})]})});return"default"===x.title?"":M},le=function(){var e=f().selectedCategory,t=Object(i.e)("Posts",(function(t){return t.equalTo("categoryId",e.categoryId).equalTo("parentId","0x9100000000000000000000000000000000000000000000000000000000000000")}),[e],{live:!0}),n=JSON.parse(JSON.stringify(t.data,["postId","contentId","postOwner"])).reverse(),r=n.length>0,a=Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Be the first to post here for"}),Object(b.jsxs)("h3",{children:[e.category," "]})]}),c=Object(b.jsx)("div",{children:n.map((function(e){return Object(b.jsx)(oe,{post:e},e.postId)}))});return r?c:a},ue=function(){var e=Object(i.c)().Moralis,t=f(),n=t.walletAddress,a=t.contractABI,c=t.contractAddress,s=t.selectedCategory,o=Object(r.useState)(0),l=Object(d.a)(o,2),u=l[0],p=l[1],j=JSON.parse(a),y=Object(i.e)("Votes",(function(e){return e.equalTo("postOwner",n)}),[],{live:!0}).data,x=s.categoryId,m={contractAddress:c,functionName:"getReputation",abi:j,params:{_address:n,_categoryID:x}};return Object(r.useEffect)((function(){function t(){return(t=Object(D.a)(V.a.mark((function t(){var n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.enableWeb3();case 2:return t.next=4,e.executeFunction(m);case 4:n=t.sent,p(n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[y,n,x]),Object(b.jsx)(b.Fragment,{children:u})},de=n(1658),pe=function(){var e=f(),t=e.contractABI,n=e.contractAddress,a=e.selectedCategory,c=JSON.parse(t),s=Object(i.d)(),o=Object(i.f)(),l=Object(r.useState)(""),u=Object(d.a)(l,2),p=u[0],j=u[1],y=Object(r.useState)(""),x=Object(d.a)(y,2),m=x[0],h=x[1],O=Object(r.useState)(),g=Object(d.a)(O,2),v=g[0],w=g[1];function I(){return(I=Object(D.a)(V.a.mark((function e(t){var r,s,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return r=e.sent,s=a.categoryId,i={contractAddress:n,functionName:"createPost",abi:c,params:{_parentId:"0x91",_contentUri:r,_categoryId:s}},e.next=7,o.fetch({params:i,onSuccess:function(){return H.b.success("success")},onError:function(e){return H.b.error(e)}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(){var e=Object(D.a)(V.a.mark((function e(){var t,n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===v){e.next=6;break}return e.next=3,C(v);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=void 0;case 7:return t=e.t0,n={title:p,content:m,image:t},e.next=11,s.saveFile("post.json",{base64:btoa(JSON.stringify(n))},{saveIPFS:!0});case 11:return r=e.sent,e.abrupt("return",r._ipfs);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(D.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.saveFile("image.jpg",v,{type:"image/jpeg",saveIPFS:!0});case 2:return t=e.sent,e.abrupt("return",t._ipfs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),!p||!m)return H.b.error("Remember to add the title and the content of your post");!function(e){I.apply(this,arguments)}({title:p,content:m}),j(""),h(""),w("")},children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("input",{type:"text",className:"mb-2 mt-2 form-control",placeholder:"Title",value:p,onChange:function(e){return j(e.target.value)}}),Object(b.jsx)("textarea",{type:"text",className:"mb-2 form-control",placeholder:"Post away",rows:"5",value:m,onChange:function(e){return h(e.target.value)}}),Object(b.jsx)("input",{type:"file",className:"mb-2 mt-2 form-control",value:null,onChange:function(){var e=Object(D.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w(t.target.files[0]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]}),Object(b.jsx)("button",{type:"submit",className:"btn btn-dark",children:"Submit"})]})})},be=function(){var e=f().selectedCategory,t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],c=n[1],s=de.a.Title,i=de.a.Paragraph;return"default"===e.category?Object(b.jsx)("div",{className:"col-lg-9",children:Object(b.jsx)("div",{style:Object(u.a)(Object(u.a)({},U.card),{},{padding:"10px 50px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"}),children:Object(b.jsxs)(de.a,{children:[Object(b.jsxs)(i,{children:[Object(b.jsx)("p",{style:{display:"block",justifyContent:"center",alignItems:"center",margin:"auto",width:"100%",fontFamily:"Poppins",textAlign:"center"},children:Object(b.jsx)("img",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:"10rem"},src:"https://content.presspage.com/uploads/2658/c800_logo-stackoverflow-square.jpg?98978",alt:"Polytter",width:"200",height:"200"})}),Object(b.jsx)("div",{style:{textAlign:"center",marginLeft:"11rem",fontFamily:"Libre Baskerville"},children:Object(b.jsx)(s,{level:3,children:"Stack Overflow 3.0"})})]}),Object(b.jsxs)(i,{children:[Object(b.jsx)("p",{style:{paddingBottom:"3rem"}}),"Post your questions !!"]}),Object(b.jsx)(i,{children:"All the data gets stored on Polygon Blockchain, completely decentralised StackOverflow."}),Object(b.jsx)(i,{children:"Reputation system works on the basis of upvotes and downvotes. Tip the answers you like!!"}),Object(b.jsx)(i,{children:" Currently works on Polygon Mumbai Testnet."}),Object(b.jsx)("div",{style:{textAlign:"center",marginLeft:"11rem"},children:Object(b.jsxs)(s,{level:5,children:[Object(b.jsx)("p",{style:{paddingBottom:"3rem"}}),"The legendary StackOverflow website is now on Web3."]})})]})})}):Object(b.jsxs)("div",{className:"col-lg-9",children:[Object(b.jsxs)("div",{style:Object(u.a)(Object(u.a)({},U.card),{},{padding:"10px 13px",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"space-between"}),children:[Object(b.jsxs)("h4",{style:{fontFamily:"Libre Baskerville"},children:[" ","Your Reputation in ",e.category," is ",Object(b.jsx)(ue,{})," "]}),Object(b.jsx)(v.a,{shape:"round",onClick:function(){c(!a)},children:"Post"})]}),a?Object(b.jsx)(pe,{}):"",Object(b.jsx)(le,{})]})},je=function(){var e=Object(i.e)("Categories"),t=JSON.parse(JSON.stringify(e.data,["categoryId","category"]));return console.log(t),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{style:{display:"flex",fontFamily:"Roboto, sans-serif",color:"#041836",padding:"10px 30px",maxWidth:"1200px",width:"100%",gap:"20px"},children:[Object(b.jsx)(R,{categories:t}),Object(b.jsx)(be,{})]})})},fe=P.a.Header,ye={content:{display:"flex",justifyContent:"center",fontFamily:"Roboto, sans-serif",color:"#041836",marginTop:"130px",padding:"10px"},header:{position:"fixed",zIndex:1,width:"100%",background:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",fontFamily:"Roboto, sans-serif",borderBottom:"2px solid rgba(0, 0, 0, 0.06)",padding:"0 10px",boxShadow:"0 1px 10px rgb(151 164 175 / 10%)"},headerRight:{display:"flex",gap:"20px",alignItems:"center",fontSize:"15px",fontWeight:"600"}},xe=function(){return Object(b.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(b.jsx)("img",{height:"30px",width:"30px",alt:"overflowlogo",src:"https://user-images.githubusercontent.com/81305824/149787348-2b8f1b69-5c2b-486d-8713-3fb2646895a9.png"}),Object(b.jsx)("h4",{style:{marginLeft:"0.2rem",fontFamily:"Cormorant Garamond"},children:"Stake Overflow"})]})},me=function(e){e.isServerInfo;var t=Object(i.c)(),n=t.isWeb3Enabled,a=t.enableWeb3,c=t.isAuthenticated,s=t.isWeb3EnableLoading;return Object(r.useEffect)((function(){!c||n||s||a()}),[c,n]),Object(b.jsx)(P.a,{style:{height:"100vh",overflow:"auto"},children:Object(b.jsxs)(o.b,{children:[Object(b.jsxs)(fe,{style:ye.header,children:[Object(b.jsx)(xe,{}),Object(b.jsxs)("div",{style:ye.headerRight,children:[Object(b.jsx)(z,{}),Object(b.jsx)(N,{})]})]}),Object(b.jsxs)("div",{style:ye.content,children:[Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{path:"/main",children:Object(b.jsx)(je,{})}),Object(b.jsx)(l.b,{path:"/nonauthenticated",children:Object(b.jsx)("h3",{children:'Please login using the "Authenticate" button'})})]}),c?Object(b.jsx)(l.a,{to:"/main"}):Object(b.jsx)(l.a,{to:"/nonauthenticated"})]})]})})},he=(n(1645),"5RjPzxxFonTsBrJeGBs2X5lJR4lh6kJClOXTpo8f"),Oe="https://ynezdcs2c9gy.usemoralis.com:2053/server",ge=function(){return Object(b.jsx)(i.a,{appId:he,serverUrl:Oe,children:Object(b.jsx)(j,{children:Object(b.jsx)(me,{isServerInfo:!0})})})};s.a.render(Object(b.jsxs)(a.a.StrictMode,{children:[Object(b.jsxs)(o.a,{basename:"https://saviour1001.github.io/moralisweeklychallenge/",children:[Object(b.jsx)(ge,{}),","]}),","]}),document.getElementById("root"))}},[[1646,1,2]]]);
//# sourceMappingURL=main.acb066f1.chunk.js.map